import{u as w,P as B}from"./index.bc66cbd5.js";import{u as O,a as j}from"./useEditDialog.be5e24fc.js";import{b as N,J as x,f as I,K as J,c as g,w as o,u as e,r as u,o as i,i as t,e as M,g as K,F as S,h as U,L,I as R,s as z,j as k,N as G,t as H}from"./vendor.a5f331e9.js";const Q=N({__name:"edit-dialog",props:{show:{type:Boolean,default:!1},data:null},emits:["close","confirm"],setup(b,{emit:h}){const s=b,v={username:[{required:!0,message:"\u7528\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nickname:[{required:!0,message:"\u7528\u6237\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},C=x(()=>[{label:"\u7BA1\u7406\u5458",value:"ROLE_ADMIN"},{label:"\u666E\u901A\u7528\u6237",value:"ROLE_USER"}]),_={id:"",username:"",nickname:"",roles:[],permissions:[]},a=I(s.data||_);J(s,r=>{a.value=r.data||_});const D=x(()=>s.show),F=I(null),E=()=>{h("confirm",a.value)};return(r,n)=>{const p=u("t-input"),m=u("t-form-item"),V=u("t-select"),f=u("t-form"),c=u("t-dialog");return i(),g(c,{ref:"dialog",width:"900px",visible:e(D),header:a.value.id?"\u7F16\u8F91\u7528\u6237":"\u521B\u5EFA\u7528\u6237",onClose:n[3]||(n[3]=l=>r.$emit("close")),onConfirm:E},{default:o(()=>[t(f,{ref_key:"form",ref:F,class:"dialog-form",data:a.value,rules:v},{default:o(()=>[t(m,{label:"\u7528\u6237\u540D\u79F0",name:"username"},{default:o(()=>[t(p,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",modelValue:a.value.username,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.username=l)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u7528\u6237\u6635\u79F0",name:"nickname"},{default:o(()=>[t(p,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",modelValue:a.value.nickname,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.nickname=l)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u89D2\u8272",name:"roles"},{default:o(()=>[t(V,{modelValue:a.value.roles,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.roles=l),options:e(C),clearable:"",multiple:""},null,8,["modelValue","options"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}}),W={class:"action-area"},X=k("\u521B\u5EFA\u7528\u6237 "),Y={class:"search-area"},Z=k(" \u7F16\u8F91 "),oe=N({__name:"index",setup(b){const h=[{colKey:"id",title:"ID"},{colKey:"username",title:"\u7528\u6237\u540D"},{colKey:"nickname",title:"\u6635\u79F0"},{colKey:"roles",title:"\u89D2\u8272"},{colKey:"operation",title:"\u64CD\u4F5C"}],s=M({name:""}),{data:v,fetchData:C,pagination:_,loading:a,onPageChange:D}=O(w,s),{showDialog:F,editData:E,handleCreate:r,handleEdit:n,onDialogClose:p,handleConfirm:m}=j(w,"\u7528\u6237");return(V,f)=>{const c=u("t-button"),l=u("t-input"),P=u("t-tag"),T=u("t-table"),$=u("t-card"),y=G("permission");return i(),K(S,null,[t($,null,{default:o(()=>[U("div",W,[L((i(),g(c,{onClick:e(r)},{default:o(()=>[X]),_:1},8,["onClick"])),[[y,e(B).USER_LIST_CREATE]])]),U("div",Y,[t(l,{class:"search-input",modelValue:s.name,"onUpdate:modelValue":f[0]||(f[0]=d=>s.name=d),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"]),t(c,{onClick:e(C)},{icon:o(()=>[t(e(R),{name:"search"})]),_:1},8,["onClick"])]),t(T,{loading:e(a),"row-key":"index",columns:h,data:e(v),pagination:e(_),onPageChange:e(D)},{operation:o(d=>[L((i(),g(c,{variant:"text",theme:"primary",onClick:A=>e(n)(d)},{default:o(()=>[t(e(R),{name:"edit"}),Z]),_:2},1032,["onClick"])),[[y,e(B).USER_LIST_EDIT]])]),roles:o(d=>[(i(!0),K(S,null,z(d.row.roles,(A,q)=>(i(),g(P,{key:q,theme:"primary",variant:"light",style:{"margin-right":"8px",cursor:"pointer"}},{default:o(()=>[k(H(A),1)]),_:2},1024))),128))]),_:1},8,["loading","data","pagination","onPageChange"])]),_:1}),t(Q,{show:e(F),data:e(E),onClose:e(p),onConfirm:e(m)},null,8,["show","data","onClose","onConfirm"])],64)}}});export{oe as default};
